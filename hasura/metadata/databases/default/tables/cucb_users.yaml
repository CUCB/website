table:
  name: users
  schema: cucb
object_relationships:
  - name: admin_type
    using:
      manual_configuration:
        column_mapping:
          admin: id
        insertion_order: null
        remote_table:
          name: auth_user_types
          schema: cucb
array_relationships:
  - name: calendar_subscriptions
    using:
      foreign_key_constraint_on:
        column: user_id
        table:
          name: calendar_subscriptions
          schema: cucb
  - name: gig_lineups
    using:
      foreign_key_constraint_on:
        column: user_id
        table:
          name: gigs_lineups
          schema: cucb
  - name: user_instruments
    using:
      foreign_key_constraint_on:
        column: user_id
        table:
          name: users_instruments
          schema: cucb
  - name: user_prefs
    using:
      foreign_key_constraint_on:
        column: user_id
        table:
          name: user_prefs
          schema: cucb
computed_fields:
  - name: prefs
    definition:
      function:
        name: user_prefs_or_default
        schema: cucb
    comment: ""
insert_permissions:
  - role: server
    permission:
      check: {}
      set:
        admin: "9"
      columns:
        - email
        - first
        - join_date
        - last
        - salted_password
        - username
select_permissions:
  - role: blue_gig
    permission:
      columns:
        - bio
        - bio_changed_date
        - first
        - join_date
        - last
        - last_login_date
        - id
      filter: {}
  - role: current_user
    permission:
      columns:
        - admin
        - bio
        - bio_changed_date
        - dietaries
        - email
        - first
        - gig_notes
        - id
        - join_date
        - last
        - last_login_date
        - location_info
        - mobile_contact_info
        - username
      filter:
        id:
          _eq: X-Hasura-User-Id
  - role: equipment
    permission:
      columns:
        - admin
        - bio
        - bio_changed_date
        - dietaries
        - email
        - first
        - id
        - join_date
        - last
        - last_login_date
        - location_info
        - mobile_contact_info
        - username
      filter: {}
  - role: gig_editor
    permission:
      columns:
        - admin
        - bio
        - bio_changed_date
        - dietaries
        - email
        - first
        - id
        - join_date
        - last
        - last_login_date
        - location_info
        - mobile_contact_info
        - username
      filter: {}
  - role: music_only
    permission:
      columns:
        - admin
        - email
        - first
        - id
        - join_date
        - last
        - last_login_date
        - username
      filter:
        id:
          _eq: X-Hasura-User-Id
  - role: president
    permission:
      columns:
        - admin
        - bio
        - bio_changed_date
        - dietaries
        - email
        - first
        - gig_notes
        - id
        - join_date
        - last
        - last_login_date
        - location_info
        - mobile_contact_info
        - username
      filter: {}
  - role: secretary
    permission:
      columns:
        - admin
        - bio
        - bio_changed_date
        - dietaries
        - email
        - first
        - gig_notes
        - id
        - join_date
        - last
        - last_login_date
        - location_info
        - mobile_contact_info
        - username
      filter: {}
  - role: server
    permission:
      columns:
        - email
        - first
        - id
        - last
        - salted_password
        - username
      filter: {}
  - role: treasurer
    permission:
      columns:
        - admin
        - bio
        - bio_changed_date
        - dietaries
        - email
        - first
        - id
        - join_date
        - last
        - last_login_date
        - location_info
        - mobile_contact_info
        - username
      filter: {}
  - role: user
    permission:
      columns:
        - bio
        - bio_changed_date
        - first
        - join_date
        - last
        - last_login_date
        - id
      filter: {}
  - role: webmaster
    permission:
      columns:
        - admin
        - bio
        - bio_changed_date
        - dietaries
        - email
        - first
        - gig_notes
        - id
        - join_date
        - last
        - last_login_date
        - location_info
        - mobile_contact_info
        - username
      filter: {}
update_permissions:
  - role: current_user
    permission:
      columns:
        - bio
        - bio_changed_date
        - dietaries
        - email
        - first
        - gig_notes
        - last
        - location_info
        - mobile_contact_info
        - salted_password
        - username
      filter:
        id:
          _eq: X-Hasura-User-Id
      check: null
  - role: equipment
    permission:
      columns:
        - bio
        - bio_changed_date
        - dietaries
        - email
        - first
        - last
        - location_info
        - mobile_contact_info
        - salted_password
        - username
      filter:
        id:
          _ne: X-Hasura-User-Id
      check: null
  - role: gig_editor
    permission:
      columns:
        - bio
        - bio_changed_date
        - dietaries
        - email
        - first
        - last
        - location_info
        - mobile_contact_info
        - salted_password
        - username
      filter:
        id:
          _ne: X-Hasura-User-Id
      check: null
  - role: music_only
    permission:
      columns:
        - email
        - first
        - last
        - salted_password
      filter:
        id:
          _eq: X-Hasura-User-Id
      check: null
  - role: president
    permission:
      columns:
        - bio
        - bio_changed_date
        - dietaries
        - email
        - first
        - last
        - location_info
        - mobile_contact_info
        - salted_password
        - username
      filter:
        id:
          _ne: X-Hasura-User-Id
      check: null
  - role: secretary
    permission:
      columns:
        - bio
        - bio_changed_date
        - dietaries
        - email
        - first
        - last
        - location_info
        - mobile_contact_info
        - salted_password
        - username
      filter:
        id:
          _ne: X-Hasura-User-Id
      check: null
  - role: server
    permission:
      columns:
        - last_login_date
        - salted_password
      filter: {}
      check: null
  - role: treasurer
    permission:
      columns:
        - bio
        - bio_changed_date
        - dietaries
        - email
        - first
        - last
        - location_info
        - mobile_contact_info
        - salted_password
        - username
      filter:
        id:
          _ne: X-Hasura-User-Id
      check: null
  - role: webmaster
    permission:
      columns:
        - admin
        - bio
        - bio_changed_date
        - dietaries
        - email
        - first
        - last
        - location_info
        - mobile_contact_info
        - salted_password
        - username
      filter:
        id:
          _ne: X-Hasura-User-Id
      check: null
