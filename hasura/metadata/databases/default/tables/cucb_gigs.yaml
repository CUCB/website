table:
  name: gigs
  schema: cucb
object_relationships:
  - name: editing_user_obj
    using:
      foreign_key_constraint_on: editing_user
  - name: gig_type
    using:
      foreign_key_constraint_on: type
  - name: posting_user_obj
    using:
      foreign_key_constraint_on: posting_user
  - name: venue
    using:
      foreign_key_constraint_on: venue_id
array_relationships:
  - name: contacts
    using:
      foreign_key_constraint_on:
        column: gig_id
        table:
          name: gigs_contacts
          schema: cucb
  - name: lineup
    using:
      foreign_key_constraint_on:
        column: gig_id
        table:
          name: gigs_lineups
          schema: cucb
computed_fields:
  - name: sort_date
    definition:
      function:
        name: gig_time_or_arrive_time
        schema: cucb
    comment: ""
insert_permissions:
  - role: equipment
    permission:
      check: {}
      set:
        editing_user: x-hasura-User-Id
        posting_user: x-hasura-User-Id
      columns:
        - admins_only
        - advertise
        - allow_signups
        - arrive_time
        - date
        - finance
        - finance_caller_paid
        - finance_deposit_received
        - finance_payment_received
        - finish_time
        - food_provided
        - notes_admin
        - notes_band
        - quote_date
        - summary
        - time
        - title
        - type
        - venue_id
  - role: gig_editor
    permission:
      check: {}
      set:
        editing_user: x-hasura-User-Id
        posting_user: x-hasura-User-Id
      columns:
        - admins_only
        - advertise
        - allow_signups
        - arrive_time
        - date
        - finance
        - finance_caller_paid
        - finance_deposit_received
        - finance_payment_received
        - finish_time
        - food_provided
        - notes_admin
        - notes_band
        - quote_date
        - summary
        - time
        - title
        - type
        - venue_id
  - role: president
    permission:
      check: {}
      set:
        editing_user: x-hasura-User-Id
        posting_user: x-hasura-User-Id
      columns:
        - admins_only
        - advertise
        - allow_signups
        - arrive_time
        - date
        - finance
        - finance_caller_paid
        - finance_deposit_received
        - finance_payment_received
        - finish_time
        - food_provided
        - notes_admin
        - notes_band
        - quote_date
        - summary
        - time
        - title
        - type
        - venue_id
  - role: secretary
    permission:
      check: {}
      set:
        editing_user: x-hasura-User-Id
        posting_user: x-hasura-User-Id
      columns:
        - admins_only
        - advertise
        - allow_signups
        - arrive_time
        - date
        - finance
        - finance_caller_paid
        - finance_deposit_received
        - finance_payment_received
        - finish_time
        - food_provided
        - notes_admin
        - notes_band
        - quote_date
        - summary
        - time
        - title
        - type
        - venue_id
  - role: treasurer
    permission:
      check: {}
      set:
        editing_user: x-hasura-User-Id
        posting_user: x-hasura-User-Id
      columns:
        - admins_only
        - advertise
        - allow_signups
        - arrive_time
        - date
        - finance
        - finance_caller_paid
        - finance_deposit_received
        - finance_payment_received
        - finish_time
        - food_provided
        - notes_admin
        - notes_band
        - quote_date
        - summary
        - time
        - title
        - type
        - venue_id
  - role: webmaster
    permission:
      check: {}
      set:
        editing_user: x-hasura-User-Id
        posting_user: x-hasura-User-Id
      columns:
        - admins_only
        - advertise
        - allow_signups
        - arrive_time
        - date
        - finance
        - finance_caller_paid
        - finance_deposit_received
        - finance_payment_received
        - finish_time
        - food_provided
        - notes_admin
        - notes_band
        - quote_date
        - summary
        - time
        - title
        - type
        - venue_id
select_permissions:
  - role: anonymous
    permission:
      columns:
        - date
        - finish_time
        - summary
        - time
        - title
      computed_fields:
        - sort_date
      filter:
        _and:
          - admins_only:
              _eq: false
          - advertise:
              _eq: true
  - role: blue_gig
    permission:
      columns:
        - admins_only
        - advertise
        - allow_signups
        - arrive_time
        - date
        - finish_time
        - food_provided
        - id
        - notes_band
        - summary
        - time
        - title
        - type
        - venue_id
      computed_fields:
        - sort_date
      filter: {}
  - role: current_user
    permission:
      columns:
        - admins_only
        - advertise
        - allow_signups
        - arrive_time
        - date
        - finish_time
        - food_provided
        - id
        - notes_band
        - summary
        - time
        - title
        - type
        - venue_id
      computed_fields:
        - sort_date
      filter:
        admins_only:
          _eq: false
  - role: equipment
    permission:
      columns:
        - admins_only
        - advertise
        - allow_signups
        - arrive_time
        - date
        - editing_time
        - editing_user
        - finance
        - finance_caller_paid
        - finance_deposit_received
        - finance_payment_received
        - finish_time
        - food_provided
        - id
        - notes_admin
        - notes_band
        - posting_time
        - posting_user
        - quote_date
        - summary
        - time
        - title
        - type
        - venue_id
      computed_fields:
        - sort_date
      filter: {}
  - role: gig_editor
    permission:
      columns:
        - admins_only
        - advertise
        - allow_signups
        - arrive_time
        - date
        - editing_time
        - editing_user
        - finance
        - finance_caller_paid
        - finance_deposit_received
        - finance_payment_received
        - finish_time
        - food_provided
        - id
        - notes_admin
        - notes_band
        - posting_time
        - posting_user
        - quote_date
        - summary
        - time
        - title
        - type
        - venue_id
      computed_fields:
        - sort_date
      filter: {}
  - role: music_only
    permission:
      columns:
        - date
        - finish_time
        - summary
        - time
        - title
      computed_fields:
        - sort_date
      filter:
        _and:
          - admins_only:
              _eq: false
          - advertise:
              _eq: true
  - role: president
    permission:
      columns:
        - admins_only
        - advertise
        - allow_signups
        - arrive_time
        - date
        - editing_time
        - editing_user
        - finance
        - finance_caller_paid
        - finance_deposit_received
        - finance_payment_received
        - finish_time
        - food_provided
        - id
        - notes_admin
        - notes_band
        - posting_time
        - posting_user
        - quote_date
        - summary
        - time
        - title
        - type
        - venue_id
      computed_fields:
        - sort_date
      filter: {}
  - role: secretary
    permission:
      columns:
        - admins_only
        - advertise
        - allow_signups
        - arrive_time
        - date
        - editing_time
        - editing_user
        - finance
        - finance_caller_paid
        - finance_deposit_received
        - finance_payment_received
        - finish_time
        - food_provided
        - id
        - notes_admin
        - notes_band
        - posting_time
        - posting_user
        - quote_date
        - summary
        - time
        - title
        - type
        - venue_id
      computed_fields:
        - sort_date
      filter: {}
  - role: treasurer
    permission:
      columns:
        - admins_only
        - advertise
        - allow_signups
        - arrive_time
        - date
        - editing_time
        - editing_user
        - finance
        - finance_caller_paid
        - finance_deposit_received
        - finance_payment_received
        - finish_time
        - food_provided
        - id
        - notes_admin
        - notes_band
        - posting_time
        - posting_user
        - quote_date
        - summary
        - time
        - title
        - type
        - venue_id
      computed_fields:
        - sort_date
      filter: {}
  - role: user
    permission:
      columns:
        - admins_only
        - advertise
        - allow_signups
        - arrive_time
        - date
        - finish_time
        - food_provided
        - id
        - notes_band
        - summary
        - time
        - title
        - type
        - venue_id
      computed_fields:
        - sort_date
      filter:
        admins_only:
          _eq: false
  - role: webmaster
    permission:
      columns:
        - admins_only
        - advertise
        - allow_signups
        - arrive_time
        - date
        - editing_time
        - editing_user
        - finance
        - finance_caller_paid
        - finance_deposit_received
        - finance_payment_received
        - finish_time
        - food_provided
        - id
        - notes_admin
        - notes_band
        - posting_time
        - posting_user
        - quote_date
        - summary
        - time
        - title
        - type
        - venue_id
      computed_fields:
        - sort_date
      filter: {}
update_permissions:
  - role: equipment
    permission:
      columns:
        - admins_only
        - advertise
        - allow_signups
        - arrive_time
        - date
        - finance
        - finance_caller_paid
        - finance_deposit_received
        - finance_payment_received
        - finish_time
        - food_provided
        - notes_admin
        - notes_band
        - quote_date
        - summary
        - time
        - title
        - type
        - venue_id
      filter: {}
      check: null
      set:
        editing_user: x-hasura-User-Id
  - role: gig_editor
    permission:
      columns:
        - admins_only
        - advertise
        - allow_signups
        - arrive_time
        - date
        - finance
        - finance_caller_paid
        - finance_deposit_received
        - finance_payment_received
        - finish_time
        - food_provided
        - notes_admin
        - notes_band
        - quote_date
        - summary
        - time
        - title
        - type
        - venue_id
      filter: {}
      check: null
      set:
        editing_user: x-hasura-User-Id
  - role: president
    permission:
      columns:
        - admins_only
        - advertise
        - allow_signups
        - arrive_time
        - date
        - finance
        - finance_caller_paid
        - finance_deposit_received
        - finance_payment_received
        - finish_time
        - food_provided
        - notes_admin
        - notes_band
        - quote_date
        - summary
        - time
        - title
        - type
        - venue_id
      filter: {}
      check: null
      set:
        editing_user: x-hasura-User-Id
  - role: secretary
    permission:
      columns:
        - admins_only
        - advertise
        - allow_signups
        - arrive_time
        - date
        - finance
        - finance_caller_paid
        - finance_deposit_received
        - finance_payment_received
        - finish_time
        - food_provided
        - notes_admin
        - notes_band
        - quote_date
        - summary
        - time
        - title
        - type
        - venue_id
      filter: {}
      check: null
      set:
        editing_user: x-hasura-User-Id
  - role: treasurer
    permission:
      columns:
        - admins_only
        - advertise
        - allow_signups
        - arrive_time
        - date
        - finance
        - finance_caller_paid
        - finance_deposit_received
        - finance_payment_received
        - finish_time
        - food_provided
        - notes_admin
        - notes_band
        - quote_date
        - summary
        - time
        - title
        - type
        - venue_id
      filter: {}
      check: null
      set:
        editing_user: x-hasura-User-Id
  - role: webmaster
    permission:
      columns:
        - admins_only
        - advertise
        - allow_signups
        - arrive_time
        - date
        - finance
        - finance_caller_paid
        - finance_deposit_received
        - finance_payment_received
        - finish_time
        - food_provided
        - notes_admin
        - notes_band
        - quote_date
        - summary
        - time
        - title
        - type
        - venue_id
      filter: {}
      check: null
      set:
        editing_user: x-hasura-User-Id
delete_permissions:
  - role: secretary
    permission:
      backend_only: false
      filter: {}
  - role: webmaster
    permission:
      backend_only: false
      filter: {}
